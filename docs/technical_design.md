# Technical Design Documentation

このドキュメントは、Stock-Analysisプロジェクトの技術的な設計、アーキテクチャ、および各モジュールの詳細な仕様について記述します。

## `scripts/run_daily_analysis.py`

このスクリプトは、日次の株式データ分析ワークフローを実行するエントリーポイントです。以下の主要なクラスによって構成されています。

### `DailyAnalysisConfig` クラス

#### 役割

日次分析ワークフロー全体の設定を一元管理するための設定クラスです。

#### 主な機能

-   **設定値の集約:** 分析期間、データベースのパスなど、ワークフロー全体で利用するパラメータを保持します。これにより、設定の変更がこのクラスの修正のみで完結し、保守性が向上します。
-   **ユーティリティの提供:**
    -   `setup_logger()`: ワークフローのログを記録するための`logging.Logger`インスタンスを生成します。
    -   `get_database_manager()`: データベース接続を管理する`DatabaseManager`のインスタンスを生成します。

### `DatabaseManager` クラス

#### 役割

分析ワークフローで使用されるデータベース（`jquants.db`と`results.db`）への接続と切断を安全に管理するコンテキストマネージャです。

#### 主な機能

-   **接続管理:** `jquants.db`（生データ用）と`results.db`（分析結果用）の2つのデータベースへの接続を確立します。
-   **安全なリソース解放:** Pythonの`with`構文をサポートしており、ブロックを抜ける際に自動的にデータベース接続をクローズします。これにより、接続の解放漏れを防ぎ、リソースを確実に管理します。
